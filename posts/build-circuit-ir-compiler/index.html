<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>CIRCT(Circuit IR Compilers and Tools)をビルドする - Keep Coding, Keep Climbing</title><meta name=Description content="programming and rock climbing"><meta property="og:title" content="CIRCT(Circuit IR Compilers and Tools)をビルドする"><meta property="og:description" content="CIRCT(Circuit IR Compilers and Tools)はMLIRベースのRTL生成ツール。 READMEにしたがってビルド、サンプル回路をコンパイルした。 環境 Ryzen 5 1600 32GBメモ"><meta property="og:type" content="article"><meta property="og:url" content="https://keepcodingkeepclimbing.com/posts/build-circuit-ir-compiler/"><meta property="og:image" content="https://keepcodingkeepclimbing.com/img/avatar.jpg"><meta property="article:published_time" content="2020-08-07T00:00:00+00:00"><meta property="article:modified_time" content="2020-08-07T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://keepcodingkeepclimbing.com/img/avatar.jpg"><meta name=twitter:title content="CIRCT(Circuit IR Compilers and Tools)をビルドする"><meta name=twitter:description content="CIRCT(Circuit IR Compilers and Tools)はMLIRベースのRTL生成ツール。 READMEにしたがってビルド、サンプル回路をコンパイルした。 環境 Ryzen 5 1600 32GBメモ"><meta name=application-name content="Keep Coding, Keep Climbing"><meta name=apple-mobile-web-app-title content="Keep Coding, Keep Climbing"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://keepcodingkeepclimbing.com/posts/build-circuit-ir-compiler/><link rel=prev href=https://keepcodingkeepclimbing.com/posts/run-onnx-mlir-shared-library/><link rel=next href=https://keepcodingkeepclimbing.com/posts/onnx-mlir-dialect/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"CIRCT(Circuit IR Compilers and Tools)をビルドする","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/keepcodingkeepclimbing.com\/posts\/build-circuit-ir-compiler\/"},"genre":"posts","keywords":"CIRCT, MLIR","wordcount":4141,"url":"https:\/\/keepcodingkeepclimbing.com\/posts\/build-circuit-ir-compiler\/","datePublished":"2020-08-07T00:00:00+00:00","dateModified":"2020-08-07T00:00:00+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Masahiro Hiramori"},"author":{"@type":"Person","name":"     \"Masahiro Hiramori\""},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Keep Coding, Keep Climbing">Keep Coding, Keep Climbing</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/cv>CV </a><a class=menu-item href=/about>About </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Keep Coding, Keep Climbing">Keep Coding, Keep Climbing</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/categories/>Categories</a><a class=menu-item href=/cv>CV</a><a class=menu-item href=/about>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">CIRCT(Circuit IR Compilers and Tools)をビルドする</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>    "Masahiro Hiramori"</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-08-07>2020-08-07</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;4141 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;9 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#環境>環境</a></li><li><a href=#ビルド>ビルド</a></li><li><a href=#サンプル回路生成>サンプル回路生成</a><ul><li><a href=#firrtlからverilogへ変換>FIRRTLからVerilogへ変換</a></li><li><a href=#rtl-dialectからverilogへ変換>RTL DialectからVerilogへ変換</a></li></ul></li><li><a href=#translateとoptのヘルプ><code>translate</code>と<code>opt</code>のヘルプ</a></li></ul></nav></div></div><div class=content id=content><p><a href=https://github.com/llvm/circt target=_blank rel="noopener noreffer">CIRCT(Circuit IR Compilers and Tools)</a>はMLIRベースのRTL生成ツール。
READMEにしたがってビルド、サンプル回路をコンパイルした。</p><h2 id=環境>環境</h2><ul><li>Ryzen 5 1600</li><li>32GBメモリ</li><li>Ubuntu 18.04 on WSL2 on Windows 10</li><li>作業ディレクトリは<code>~/workspace</code>とする</li></ul><h2 id=ビルド>ビルド</h2><p>作業ディレクトリ(<code>~/workspace</code>)にリポジトリをクローンする。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> ~/workspace
git clone --recursive https://github.com/llvm/circt.git
</code></pre></td></tr></table></div></div><p>CIRCUITはMLIRベースに開発されているため、まずはMLIRをビルドする。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> circt
mkdir llvm/build
<span class=nb>cd</span> llvm/build
cmake -G Ninja ../llvm -DLLVM_ENABLE_PROJECTS<span class=o>=</span><span class=s2>&#34;mlir&#34;</span> -DLLVM_TARGETS_TO_BUILD<span class=o>=</span><span class=s2>&#34;X86&#34;</span>  -DLLVM_ENABLE_ASSERTIONS<span class=o>=</span>ON -DCMAKE_BUILD_TYPE<span class=o>=</span>Release
ninja
ninja check-mlir
</code></pre></td></tr></table></div></div><p>続いてCIRCT本体をビルドする。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> ~/workspace/circt
mkdir build
<span class=nb>cd</span> build
cmake -G Ninja .. -DMLIR_DIR<span class=o>=</span>~/workspace/circt/llvm/build/lib/cmake/mlir -DLLVM_DIR<span class=o>=</span>~/workspace/circt/llvm/build/lib/cmake/llvm -DLLVM_ENABLE_ASSERTIONS<span class=o>=</span>ON -DCMAKE_BUILD_TYPE<span class=o>=</span>Release
ninja
ninja check-circt
</code></pre></td></tr></table></div></div><p><code>build/bin/</code>に<code>circuit-translate</code>と<code>circuit-opt</code>が生成されるので、環境変数パスにディレクトリを追加する。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span>~/workspace/circt/build/bin:<span class=nv>$PATH</span>
</code></pre></td></tr></table></div></div><h2 id=サンプル回路生成>サンプル回路生成</h2><p>サンプル入力ファイルのあるディレクトリに移動する。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> ~/workspace/circt/test/EmitVerilog
</code></pre></td></tr></table></div></div><h3 id=firrtlからverilogへ変換>FIRRTLからVerilogへ変換</h3><p>FIRRTL→Verilogへ変換する。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>circt-translate --parse-fir verilog-basic.fir <span class=p>|</span> circt-translate -emit-verilog
</code></pre></td></tr></table></div></div><p>出力は以下。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span><span class=lnt>246
</span><span class=lnt>247
</span><span class=lnt>248
</span><span class=lnt>249
</span><span class=lnt>250
</span><span class=lnt>251
</span><span class=lnt>252
</span><span class=lnt>253
</span><span class=lnt>254
</span><span class=lnt>255
</span><span class=lnt>256
</span><span class=lnt>257
</span><span class=lnt>258
</span><span class=lnt>259
</span><span class=lnt>260
</span><span class=lnt>261
</span><span class=lnt>262
</span><span class=lnt>263
</span><span class=lnt>264
</span><span class=lnt>265
</span><span class=lnt>266
</span><span class=lnt>267
</span><span class=lnt>268
</span><span class=lnt>269
</span><span class=lnt>270
</span><span class=lnt>271
</span><span class=lnt>272
</span><span class=lnt>273
</span><span class=lnt>274
</span><span class=lnt>275
</span><span class=lnt>276
</span><span class=lnt>277
</span><span class=lnt>278
</span><span class=lnt>279
</span><span class=lnt>280
</span><span class=lnt>281
</span><span class=lnt>282
</span><span class=lnt>283
</span><span class=lnt>284
</span><span class=lnt>285
</span><span class=lnt>286
</span><span class=lnt>287
</span><span class=lnt>288
</span><span class=lnt>289
</span><span class=lnt>290
</span><span class=lnt>291
</span><span class=lnt>292
</span><span class=lnt>293
</span><span class=lnt>294
</span><span class=lnt>295
</span><span class=lnt>296
</span><span class=lnt>297
</span><span class=lnt>298
</span><span class=lnt>299
</span><span class=lnt>300
</span><span class=lnt>301
</span><span class=lnt>302
</span><span class=lnt>303
</span><span class=lnt>304
</span><span class=lnt>305
</span><span class=lnt>306
</span><span class=lnt>307
</span><span class=lnt>308
</span><span class=lnt>309
</span><span class=lnt>310
</span><span class=lnt>311
</span><span class=lnt>312
</span><span class=lnt>313
</span><span class=lnt>314
</span><span class=lnt>315
</span><span class=lnt>316
</span><span class=lnt>317
</span><span class=lnt>318
</span><span class=lnt>319
</span><span class=lnt>320
</span><span class=lnt>321
</span><span class=lnt>322
</span><span class=lnt>323
</span><span class=lnt>324
</span><span class=lnt>325
</span><span class=lnt>326
</span><span class=lnt>327
</span><span class=lnt>328
</span><span class=lnt>329
</span><span class=lnt>330
</span><span class=lnt>331
</span><span class=lnt>332
</span><span class=lnt>333
</span><span class=lnt>334
</span><span class=lnt>335
</span><span class=lnt>336
</span><span class=lnt>337
</span><span class=lnt>338
</span><span class=lnt>339
</span><span class=lnt>340
</span><span class=lnt>341
</span><span class=lnt>342
</span><span class=lnt>343
</span><span class=lnt>344
</span><span class=lnt>345
</span><span class=lnt>346
</span><span class=lnt>347
</span><span class=lnt>348
</span><span class=lnt>349
</span><span class=lnt>350
</span><span class=lnt>351
</span><span class=lnt>352
</span><span class=lnt>353
</span><span class=lnt>354
</span><span class=lnt>355
</span><span class=lnt>356
</span><span class=lnt>357
</span><span class=lnt>358
</span><span class=lnt>359
</span><span class=lnt>360
</span><span class=lnt>361
</span><span class=lnt>362
</span><span class=lnt>363
</span><span class=lnt>364
</span><span class=lnt>365
</span><span class=lnt>366
</span><span class=lnt>367
</span><span class=lnt>368
</span><span class=lnt>369
</span><span class=lnt>370
</span><span class=lnt>371
</span><span class=lnt>372
</span><span class=lnt>373
</span><span class=lnt>374
</span><span class=lnt>375
</span><span class=lnt>376
</span><span class=lnt>377
</span><span class=lnt>378
</span><span class=lnt>379
</span><span class=lnt>380
</span><span class=lnt>381
</span><span class=lnt>382
</span><span class=lnt>383
</span><span class=lnt>384
</span><span class=lnt>385
</span><span class=lnt>386
</span><span class=lnt>387
</span><span class=lnt>388
</span><span class=lnt>389
</span><span class=lnt>390
</span><span class=lnt>391
</span><span class=lnt>392
</span><span class=lnt>393
</span><span class=lnt>394
</span><span class=lnt>395
</span><span class=lnt>396
</span><span class=lnt>397
</span><span class=lnt>398
</span><span class=lnt>399
</span><span class=lnt>400
</span><span class=lnt>401
</span><span class=lnt>402
</span><span class=lnt>403
</span><span class=lnt>404
</span><span class=lnt>405
</span><span class=lnt>406
</span><span class=lnt>407
</span><span class=lnt>408
</span><span class=lnt>409
</span><span class=lnt>410
</span><span class=lnt>411
</span><span class=lnt>412
</span><span class=lnt>413
</span><span class=lnt>414
</span><span class=lnt>415
</span><span class=lnt>416
</span><span class=lnt>417
</span><span class=lnt>418
</span><span class=lnt>419
</span><span class=lnt>420
</span><span class=lnt>421
</span><span class=lnt>422
</span><span class=lnt>423
</span><span class=lnt>424
</span><span class=lnt>425
</span><span class=lnt>426
</span><span class=lnt>427
</span><span class=lnt>428
</span><span class=lnt>429
</span><span class=lnt>430
</span><span class=lnt>431
</span><span class=lnt>432
</span><span class=lnt>433
</span><span class=lnt>434
</span><span class=lnt>435
</span><span class=lnt>436
</span><span class=lnt>437
</span><span class=lnt>438
</span><span class=lnt>439
</span><span class=lnt>440
</span><span class=lnt>441
</span><span class=lnt>442
</span><span class=lnt>443
</span><span class=lnt>444
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-verilog data-lang=verilog><span class=c1>// Standard header to adapt well known macros to our needs.\n&#34;;
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>RANDOMIZE_GARBAGE_ASSIGN</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifdef</span> <span class=n>RANDOMIZE_INVALID_ASSIGN</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifdef</span> <span class=n>RANDOMIZE_REG_INIT</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifdef</span> <span class=n>RANDOMIZE_MEM_INIT</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifndef</span> <span class=n>RANDOM</span>
<span class=cp>`define RANDOM $random
</span><span class=cp></span><span class=no>`endif</span>
<span class=c1>// Users can define &#39;PRINTF_COND&#39; to add an extra gate to prints.
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>PRINTF_COND</span>
<span class=cp>`define PRINTF_COND_ (`PRINTF_COND)
</span><span class=cp></span><span class=no>`else</span>
<span class=cp>`define PRINTF_COND_ 1
</span><span class=cp></span><span class=no>`endif</span>
<span class=c1>// Users can define &#39;STOP_COND&#39; to add an extra gate to stop conditions.
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>STOP_COND</span>
<span class=cp>`define STOP_COND_ (`STOP_COND)
</span><span class=cp></span><span class=no>`else</span>
<span class=cp>`define STOP_COND_ 1
</span><span class=cp></span><span class=no>`endif</span>

<span class=c1>// Users can define INIT_RANDOM as general code that gets injected into the
</span><span class=c1>// initializer block for modules with registers.
</span><span class=c1></span><span class=no>`ifndef</span> <span class=n>INIT_RANDOM</span>
<span class=cp>`define INIT_RANDOM
</span><span class=cp></span><span class=no>`endif</span>

<span class=c1>// If using random initialization, you can also define RANDOMIZE_DELAY to
</span><span class=c1>// customize the delay used, otherwise 0.002 is used.
</span><span class=c1></span><span class=no>`ifndef</span> <span class=n>RANDOMIZE_DELAY</span>
<span class=cp>`define RANDOMIZE_DELAY 0.002
</span><span class=cp></span><span class=no>`endif</span>

<span class=c1>// Define INIT_RANDOM_PROLOG_ for use in our modules below.
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>RANDOMIZE</span>
  <span class=no>`ifndef</span> <span class=n>VERILATOR</span>
<span class=cp>    `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
</span><span class=cp></span>  <span class=no>`else</span>
<span class=cp>    `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
</span><span class=cp></span>  <span class=no>`endif</span>
<span class=no>`else</span>
<span class=cp>  `define INIT_RANDOM_PROLOG_
</span><span class=cp></span><span class=no>`endif</span>
<span class=k>module</span> <span class=n>inputs_only</span><span class=p>(</span>
  <span class=k>input</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span>

<span class=k>endmodule</span>

<span class=k>module</span> <span class=n>no_ports</span><span class=p>();</span>
  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:8:12
</span><span class=c1></span>
<span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Expressions</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>in4</span><span class=p>,</span>
  <span class=k>input</span>        <span class=n>clock</span><span class=p>,</span>
  <span class=k>output</span>       <span class=n>out1</span><span class=p>,</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>out4</span><span class=p>);</span>

  <span class=kt>wire</span> <span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x1</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:30:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x2</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:35:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x3</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:37:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x4</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:40:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>9</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x5</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:46:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>8</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x6</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:50:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x7</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:57:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x8</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:62:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x9</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:66:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x10</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:69:14
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>5</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x11</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:79:14
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x12</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:81:14
</span><span class=c1></span>
  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=o>^</span><span class=n>in4</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:12:12, :13:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>in4</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:14:12, :15:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=o>|</span><span class=n>in4</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:16:12, :17:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=o>~</span><span class=n>in4</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:18:12, :19:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out4</span> <span class=o>=</span> <span class=n>in4</span> <span class=o>%</span> <span class=mh>4&#39;h1</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:20:17, :21:12, :22:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=n>clock</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:23:12, :24:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=mh>1&#39;h1</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:25:17, :26:12, :27:12, :28:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x1</span> <span class=o>=</span> <span class=n>in4</span><span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>];</span> <span class=c1>// &lt;stdin&gt;:29:12, :30:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x2</span> <span class=o>=</span> <span class=n>in4</span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>2</span><span class=p>]</span> <span class=o>|</span> <span class=p>{</span><span class=n>in4</span><span class=p>[</span><span class=mh>2</span><span class=p>],</span> <span class=mh>1&#39;h0</span><span class=p>};</span>        <span class=c1>// &lt;stdin&gt;:31:12, :32:13, :33:13, :34:13, :35:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x3</span> <span class=o>=</span> <span class=n>in4</span> <span class=o>&gt;&gt;&gt;</span> <span class=n>in4</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:36:13, :37:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x4</span> <span class=o>=</span> <span class=n>$signed</span><span class=p>(</span><span class=n>in4</span><span class=p>)</span> <span class=o>&gt;&gt;&gt;</span> <span class=n>in4</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:38:13, :39:13, :40:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x5</span> <span class=o>=</span> <span class=p>{</span><span class=n>in4</span><span class=p>,</span> <span class=n>clock</span><span class=p>,</span> <span class=n>clock</span><span class=p>,</span> <span class=n>in4</span><span class=p>};</span> <span class=c1>// &lt;stdin&gt;:45:13, :46:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x6</span> <span class=o>=</span> <span class=p>{</span><span class=mh>1</span><span class=mb>&#39;b0</span><span class=p>,</span> <span class=n>in4</span><span class=p>,</span> <span class=n>in4</span><span class=p>};</span> <span class=c1>// &lt;stdin&gt;:49:13, :50:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x7</span> <span class=o>=</span> <span class=n>clock</span> <span class=o>?</span> <span class=p>(</span><span class=n>clock</span> <span class=o>?</span> <span class=mh>4&#39;h1</span> <span class=o>:</span> <span class=mh>4&#39;h2</span><span class=p>)</span> <span class=o>:</span> <span class=mh>4&#39;h3</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:20:17, :51:13, :52:13, :53:17, :54:13, :55:17, :56:13, :57:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x8</span> <span class=o>=</span> <span class=n>clock</span> <span class=o>?</span> <span class=mh>4&#39;h1</span> <span class=o>:</span> <span class=n>clock</span> <span class=o>?</span> <span class=mh>4&#39;h2</span> <span class=o>:</span> <span class=mh>4&#39;h3</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:20:17, :53:17, :55:17, :58:13, :59:13, :60:13, :61:13, :62:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x9</span> <span class=o>=</span> <span class=n>in4</span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>2</span><span class=p>]</span> <span class=o>|</span> <span class=n>in4</span><span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>];</span>      <span class=c1>// &lt;stdin&gt;:63:13, :64:13, :65:13, :66:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x10</span> <span class=o>=</span> <span class=n>in4</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:68:13, :69:14
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x11</span> <span class=o>=</span> <span class=p>{</span> <span class=p>{</span><span class=mh>2</span><span class=mi>&#39;d0</span><span class=p>},</span> <span class=n>in4</span><span class=p>}</span> <span class=o>^</span> <span class=p>{{</span><span class=mh>2</span><span class=p>{</span><span class=n>in4</span><span class=p>[</span><span class=mh>3</span><span class=p>]}},</span> <span class=n>in4</span><span class=p>}</span> <span class=o>^</span> <span class=p>{</span><span class=mh>6</span><span class=p>{</span><span class=n>clock</span><span class=p>}</span> <span class=p>};</span> <span class=c1>// &lt;stdin&gt;:70:13, :71:13, :72:13, :73:13, :74:13, :75:13, :76:13, :77:13, :78:13, :79:14
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>x12</span> <span class=o>=</span> <span class=n>in4</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:80:13, :81:14
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Precedence</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span>
  <span class=k>output</span>       <span class=n>out1</span><span class=p>,</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>out</span><span class=p>);</span>

  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:84:12, :85:12, :86:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>-</span> <span class=n>c</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:87:12, :88:12, :89:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>-</span> <span class=p>(</span><span class=n>b</span> <span class=o>+</span> <span class=n>c</span><span class=p>);</span>     <span class=c1>// &lt;stdin&gt;:90:12, :91:12, :92:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>*</span> <span class=n>c</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:93:12, :94:12, :95:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:96:12, :97:12, :98:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=p>(</span><span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>)</span> <span class=o>*</span> <span class=n>c</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:99:13, 💯13, :101:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=p>(</span><span class=n>b</span> <span class=o>+</span> <span class=n>c</span><span class=p>);</span>     <span class=c1>// &lt;stdin&gt;:102:13, :103:13, :104:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=p>(</span><span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>)</span> <span class=o>*</span> <span class=p>(</span><span class=n>b</span> <span class=o>+</span> <span class=n>c</span><span class=p>);</span>       <span class=c1>// &lt;stdin&gt;:105:13, :106:13, :107:13, :108:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=o>^</span><span class=p>(</span><span class=n>b</span> <span class=o>+</span> <span class=n>c</span><span class=p>);</span>       <span class=c1>// &lt;stdin&gt;:109:13, :110:13, :111:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=n>b</span> <span class=o>&lt;</span> <span class=n>c</span> <span class=o>|</span> <span class=n>b</span> <span class=o>&gt;</span> <span class=n>c</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:112:13, :113:13, :114:13, :115:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=p>(</span><span class=n>b</span> <span class=o>^</span> <span class=n>c</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>out1</span> <span class=o>|</span> <span class=n>out1</span><span class=p>);</span>        <span class=c1>// &lt;stdin&gt;:116:13, :117:13, :118:13, :119:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=n>out</span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>2</span><span class=p>];</span>       <span class=c1>// &lt;stdin&gt;:120:13, :121:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out1</span> <span class=o>=</span> <span class=n>out</span> <span class=o>&lt;</span> <span class=n>a</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:122:13, :123:7
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Sign</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>d</span><span class=p>,</span>
  <span class=k>output</span>       <span class=n>out</span><span class=p>);</span>

  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:126:12, :127:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>$signed</span><span class=p>(</span><span class=n>c</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>$signed</span><span class=p>(</span><span class=n>d</span><span class=p>);</span> <span class=c1>// &lt;stdin&gt;:128:12, :129:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>$signed</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>$signed</span><span class=p>(</span><span class=n>b</span><span class=p>);</span> <span class=c1>// &lt;stdin&gt;:130:12, :131:12, :132:12, :133:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>out</span> <span class=o>=</span> <span class=n>a</span> <span class=o>==</span> <span class=n>b</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:134:12, :135:12, :136:12, :137:7
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>MultiUseExpr</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>a</span><span class=p>,</span>
  <span class=k>output</span>       <span class=n>b</span><span class=p>);</span>

  <span class=kt>wire</span> <span class=n>_T</span> <span class=o>=</span> <span class=o>&amp;^</span><span class=n>a</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:140:12, :141:12
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>4</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_T_0</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>a</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:142:12
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>_T</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:143:12, :144:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=o>^</span><span class=n>_T</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:145:12, :146:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>_T_0</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:147:12, :148:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=o>^</span><span class=n>_T_0</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:149:12, :150:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=o>^</span><span class=p>(</span><span class=mh>4</span><span class=p>&#39;</span><span class=n>sh3</span> <span class=o>|</span> <span class=mh>4</span><span class=p>&#39;</span><span class=n>sh3</span><span class=p>);</span>  <span class=c1>// &lt;stdin&gt;:151:17, :152:12, :153:12, :154:12, :155:7
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_T_1</span> <span class=o>=</span> <span class=o>~</span><span class=n>a</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:156:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=n>_T_1</span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>2</span><span class=p>];</span> <span class=c1>// &lt;stdin&gt;:157:13, :158:7
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>UseInstances</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>a_in</span><span class=p>,</span>
  <span class=k>output</span>       <span class=n>a_out</span><span class=p>);</span>

  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>xyz_in</span><span class=p>;</span>    <span class=c1>// &lt;stdin&gt;:163:14
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>xyz_out</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:163:14
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>xyz2_in</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:168:15
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>xyz2_out</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:168:15
</span><span class=c1></span>
  <span class=n>FooExtModule</span> <span class=n>xyz</span> <span class=p>(</span>    <span class=c1>// &lt;stdin&gt;:163:14
</span><span class=c1></span>    <span class=p>.</span><span class=n>in</span><span class=p>(</span><span class=n>xyz_in</span><span class=p>),</span>
    <span class=p>.</span><span class=n>out</span><span class=p>(</span><span class=n>xyz_out</span><span class=p>)</span>
  <span class=p>);</span>
  <span class=k>assign</span> <span class=n>xyz_in</span> <span class=o>=</span> <span class=n>a_in</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:164:12, :165:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>a_out</span> <span class=o>=</span> <span class=n>xyz_out</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:166:12, :167:7
</span><span class=c1></span>  <span class=n>MyParameterizedExtModule</span> <span class=p>#(.</span><span class=n>DEFAULT</span><span class=p>(</span><span class=mh>0</span><span class=p>),</span> <span class=p>.</span><span class=n>DEPTH</span><span class=p>(</span><span class=mf>3.500000e+00</span><span class=p>),</span> <span class=p>.</span><span class=n>FORMAT</span><span class=p>(</span><span class=s>&#34;xyz_timeout=%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>),</span> <span class=p>.</span><span class=n>WIDTH</span><span class=p>(</span><span class=mh>32</span><span class=p>))</span> <span class=n>xyz2</span> <span class=p>(</span> <span class=c1>// &lt;stdin&gt;:168:15
</span><span class=c1></span>    <span class=p>.</span><span class=n>in</span><span class=p>(</span><span class=n>xyz2_in</span><span class=p>),</span>
    <span class=p>.</span><span class=n>out</span><span class=p>(</span><span class=n>xyz2_out</span><span class=p>)</span>
  <span class=p>);</span>
  <span class=k>assign</span> <span class=n>xyz2_in</span> <span class=o>=</span> <span class=n>a_in</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:169:12, :170:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>a_out</span> <span class=o>=</span> <span class=n>xyz2_out</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:171:12, :172:7
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Stop</span><span class=p>(</span>
  <span class=k>input</span> <span class=n>clock</span><span class=p>,</span> <span class=n>reset</span><span class=p>);</span>


  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clock</span><span class=p>)</span> <span class=k>begin</span>
    <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
      <span class=k>if</span> <span class=p>(</span><span class=no>`STOP_COND_</span> <span class=o>&amp;&amp;</span> <span class=n>reset</span><span class=p>)</span> <span class=n>$fatal</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:175:7
</span><span class=c1></span>    <span class=no>`endif</span>
  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Stop2</span><span class=p>(</span>
  <span class=k>input</span> <span class=n>clock</span><span class=p>,</span> <span class=n>reset</span><span class=p>);</span>


  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clock</span><span class=p>)</span> <span class=k>begin</span>
    <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
      <span class=k>if</span> <span class=p>(</span><span class=no>`STOP_COND_</span> <span class=o>&amp;&amp;</span> <span class=n>reset</span><span class=p>)</span> <span class=k>begin</span>
        <span class=n>$fatal</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:178:7
</span><span class=c1></span>        <span class=nb>$finish</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:179:7
</span><span class=c1></span>      <span class=k>end</span>
    <span class=no>`endif</span> <span class=c1>// !SYNTHESIS
</span><span class=c1></span>  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Stop3</span><span class=p>(</span>
  <span class=k>input</span> <span class=n>clock1</span><span class=p>,</span> <span class=n>clock2</span><span class=p>,</span> <span class=n>reset</span><span class=p>);</span>


  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clock1</span><span class=p>)</span> <span class=k>begin</span>
    <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
      <span class=k>if</span> <span class=p>(</span><span class=no>`STOP_COND_</span> <span class=o>&amp;&amp;</span> <span class=n>reset</span><span class=p>)</span> <span class=n>$fatal</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:182:7
</span><span class=c1></span>    <span class=no>`endif</span>
  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span>  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clock2</span><span class=p>)</span> <span class=k>begin</span>
    <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
      <span class=k>if</span> <span class=p>(</span><span class=no>`STOP_COND_</span> <span class=o>&amp;&amp;</span> <span class=n>reset</span><span class=p>)</span> <span class=nb>$finish</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:183:7
</span><span class=c1></span>    <span class=no>`endif</span>
  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Print</span><span class=p>(</span>
  <span class=k>input</span>       <span class=n>clock</span><span class=p>,</span> <span class=n>reset</span><span class=p>,</span>
  <span class=k>input</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span>


  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clock</span><span class=p>)</span> <span class=k>begin</span>
    <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
      <span class=k>if</span> <span class=p>(</span><span class=no>`PRINTF_COND_</span> <span class=o>&amp;&amp;</span> <span class=n>reset</span><span class=p>)</span> <span class=nb>$fwrite</span><span class=p>(</span><span class=mh>32&#39;h80000002</span><span class=p>,</span> <span class=s>&#34;Hi %x %x</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>a</span> <span class=o>+</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span>        <span class=c1>// &lt;stdin&gt;:186:12, :187:7
</span><span class=c1></span>    <span class=no>`endif</span>
  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>UninitReg1</span><span class=p>(</span>
  <span class=k>input</span>       <span class=n>clock</span><span class=p>,</span> <span class=n>reset</span><span class=p>,</span> <span class=n>cond</span><span class=p>,</span>
  <span class=k>input</span> <span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>value</span><span class=p>);</span>

  <span class=kt>reg</span>  <span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>count</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:191:16
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:192:12
</span><span class=c1></span>
  <span class=k>assign</span> <span class=n>x</span> <span class=o>=</span> <span class=n>count</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:192:12
</span><span class=c1></span>
  <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
  <span class=k>initial</span> <span class=k>begin</span>
    <span class=no>`INIT_RANDOM_PROLOG_</span>
    <span class=no>`ifdef</span> <span class=n>RANDOMIZE_REG_INIT</span>
      <span class=n>count</span> <span class=o>=</span> <span class=no>`RANDOM</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:191:16
</span><span class=c1></span>    <span class=no>`endif</span>
  <span class=k>end</span> <span class=c1>// initial
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// SYNTHESIS
</span><span class=c1></span>
  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clock</span><span class=p>)</span> <span class=k>begin</span>
    <span class=n>count</span> <span class=o>&lt;=</span> <span class=n>reset</span> <span class=o>?</span> <span class=mh>2&#39;h0</span> <span class=o>:</span> <span class=n>cond</span> <span class=o>?</span> <span class=n>value</span> <span class=o>:</span> <span class=n>count</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:193:12, :194:17, :195:12, :196:7
</span><span class=c1></span>  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>InitReg1</span><span class=p>(</span>
  <span class=k>input</span>         <span class=n>clock</span><span class=p>,</span> <span class=n>reset</span><span class=p>,</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>31</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>io_d</span><span class=p>,</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>31</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>io_q</span><span class=p>,</span>
  <span class=k>input</span>         <span class=n>io_en</span><span class=p>);</span>

  <span class=kt>reg</span> <span class=p>[</span><span class=mh>31</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>reg_0</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:201:14
</span><span class=c1></span>
  <span class=k>assign</span> <span class=n>io_q</span> <span class=o>=</span> <span class=n>reg_0</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:202:7
</span><span class=c1></span>
  <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
  <span class=k>initial</span> <span class=k>begin</span>
    <span class=no>`INIT_RANDOM_PROLOG_</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>reset</span><span class=p>)</span> <span class=n>reg_0</span> <span class=o>=</span> <span class=mh>32&#39;h0</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:199:12, :200:18, :201:14
</span><span class=c1></span>    <span class=no>`ifdef</span> <span class=n>RANDOMIZE_REG_INIT</span>
      <span class=k>if</span> <span class=p>(</span><span class=o>~</span><span class=n>reset</span><span class=p>)</span> <span class=n>reg_0</span> <span class=o>=</span> <span class=no>`RANDOM</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:199:12, :200:18, :201:14
</span><span class=c1></span>    <span class=no>`endif</span>
  <span class=k>end</span> <span class=c1>// initial
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// SYNTHESIS
</span><span class=c1></span>
  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>clock</span> <span class=k>or</span> <span class=k>posedge</span> <span class=n>reset</span><span class=p>)</span> <span class=k>begin</span>
    <span class=n>reg_0</span> <span class=o>&lt;=</span> <span class=n>io_en</span> <span class=o>?</span> <span class=n>io_d</span> <span class=o>:</span> <span class=n>reg_0</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:199:12, :203:12, :204:7
</span><span class=c1></span>  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Analog</span><span class=p>(</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>4</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>io_pins_asrcn3v3</span><span class=p>);</span>

<span class=k>endmodule</span>

<span class=k>module</span> <span class=n>MemSimple</span><span class=p>(</span>
  <span class=k>input</span>         <span class=n>clock1</span><span class=p>,</span> <span class=n>clock2</span><span class=p>,</span> <span class=n>inpred</span><span class=p>,</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>41</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>indata</span><span class=p>,</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>41</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>result</span><span class=p>);</span>

  <span class=kt>wire</span> <span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span>  <span class=n>_M_read_addr</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span>        <span class=n>_M_read_en</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span>        <span class=n>_M_read_clk</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>41</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_read_data</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span>  <span class=n>_M_write_addr</span><span class=p>;</span>    <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span>        <span class=n>_M_write_en</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span>        <span class=n>_M_write_clk</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>41</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_write_data</span><span class=p>;</span>    <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>wire</span>        <span class=n>_M_write_mask</span><span class=p>;</span>    <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=kt>reg</span>  <span class=p>[</span><span class=mh>41</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M</span><span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>];</span>

  <span class=k>assign</span> <span class=n>_M_read_data</span> <span class=o>=</span> <span class=n>_M</span><span class=p>[</span><span class=n>_M_read_addr</span><span class=p>];</span>       <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>result</span> <span class=o>=</span> <span class=n>_M_read_data</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:210:12, :211:12, :212:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_read_addr</span> <span class=o>=</span> <span class=mh>1&#39;h0</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:213:12, :214:12, :215:17, :216:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_read_en</span> <span class=o>=</span> <span class=mh>1&#39;h1</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:217:12, :218:12, :219:17, :220:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_read_clk</span> <span class=o>=</span> <span class=n>clock1</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:221:12, :222:12, :223:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_write_addr</span> <span class=o>=</span> <span class=mh>3&#39;h0</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:224:12, :225:12, :226:17, :227:13, :228:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_write_en</span> <span class=o>=</span> <span class=n>inpred</span> <span class=o>?</span> <span class=mh>1&#39;h1</span> <span class=o>:</span> <span class=mh>1&#39;h0</span><span class=p>;</span>    <span class=c1>// &lt;stdin&gt;:215:17, :219:17, :229:13, :230:13, :231:13, :232:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_write_clk</span> <span class=o>=</span> <span class=n>clock2</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:233:13, :234:13, :235:13, :236:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_write_data</span> <span class=o>=</span> <span class=n>indata</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:237:13, :238:13, :239:13, :240:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_write_mask</span> <span class=o>=</span> <span class=mh>1&#39;h1</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:219:17, :241:13, :242:13, :243:13, :244:7
</span><span class=c1></span>
  <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
  <span class=k>initial</span> <span class=k>begin</span>
    <span class=no>`INIT_RANDOM_PROLOG_</span>
    <span class=no>`ifdef</span> <span class=n>RANDOMIZE_MEM_INIT</span>
      <span class=k>integer</span> <span class=n>initvar</span><span class=p>;</span>
      <span class=k>for</span> <span class=p>(</span><span class=n>initvar</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span> <span class=n>initvar</span> <span class=o>&lt;</span> <span class=mh>8</span><span class=p>;</span> <span class=n>initvar</span> <span class=o>=</span> <span class=n>initvar</span><span class=o>+</span><span class=mh>1</span><span class=p>)</span>
        <span class=n>_M</span><span class=p>[</span><span class=n>initvar</span><span class=p>]</span> <span class=o>=</span> <span class=no>`RANDOM</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>    <span class=no>`endif</span> <span class=c1>// RANDOMIZE_MEM_INIT
</span><span class=c1></span>  <span class=k>end</span> <span class=c1>// initial
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// SYNTHESIS
</span><span class=c1></span>
  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>_M_write_clk</span><span class=p>)</span> <span class=k>begin</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>_M_write_en</span> <span class=o>&amp;</span> <span class=n>_M_write_mask</span><span class=p>)</span> <span class=n>_M</span><span class=p>[</span><span class=n>_M_write_addr</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>_M_write_data</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:209:13
</span><span class=c1></span>  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>MemAggregate</span><span class=p>(</span>
  <span class=k>input</span> <span class=n>clock1</span><span class=p>,</span> <span class=n>clock2</span><span class=p>);</span>

  <span class=kt>wire</span> <span class=p>[</span><span class=mh>4</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_read_addr</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_read_en</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_read_clk</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_read_data_id</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_read_data_other</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>4</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_write_addr</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_en</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_clk</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_write_data_id</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_write_data_other</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_mask_id</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_mask_other</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=kt>reg</span>  <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_id</span><span class=p>[</span><span class=mh>19</span><span class=o>:</span><span class=mh>0</span><span class=p>];</span>
  <span class=kt>reg</span>  <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_other</span><span class=p>[</span><span class=mh>19</span><span class=o>:</span><span class=mh>0</span><span class=p>];</span>

  <span class=no>`ifndef</span> <span class=n>RANDOMIZE_GARBAGE_ASSIGN</span>
    <span class=k>assign</span> <span class=n>_M_read_data_id</span> <span class=o>=</span> <span class=n>_M_id</span><span class=p>[</span><span class=n>_M_read_addr</span><span class=p>];</span>       <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>    <span class=k>assign</span> <span class=n>_M_read_data_other</span> <span class=o>=</span> <span class=n>_M_other</span><span class=p>[</span><span class=n>_M_read_addr</span><span class=p>];</span> <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=no>`else</span>
    <span class=k>assign</span> <span class=n>_M_read_data_id</span> <span class=o>=</span> <span class=n>_M_read_addr</span> <span class=o>&lt;</span> <span class=mh>20</span> <span class=o>?</span> <span class=n>_M_id</span><span class=p>[</span><span class=n>_M_read_addr</span><span class=p>]</span> <span class=o>:</span> <span class=no>`RANDOM</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>    <span class=k>assign</span> <span class=n>_M_read_data_other</span> <span class=o>=</span> <span class=n>_M_read_addr</span> <span class=o>&lt;</span> <span class=mh>20</span> <span class=o>?</span> <span class=n>_M_other</span><span class=p>[</span><span class=n>_M_read_addr</span><span class=p>]</span> <span class=o>:</span> <span class=no>`RANDOM</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// RANDOMIZE_GARBAGE_ASSIGN
</span><span class=c1></span>
  <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
  <span class=k>initial</span> <span class=k>begin</span>
    <span class=no>`INIT_RANDOM_PROLOG_</span>
    <span class=no>`ifdef</span> <span class=n>RANDOMIZE_MEM_INIT</span>
      <span class=k>integer</span> <span class=n>initvar</span><span class=p>;</span>
      <span class=k>for</span> <span class=p>(</span><span class=n>initvar</span> <span class=o>=</span> <span class=mh>0</span><span class=p>;</span> <span class=n>initvar</span> <span class=o>&lt;</span> <span class=mh>20</span><span class=p>;</span> <span class=n>initvar</span> <span class=o>=</span> <span class=n>initvar</span><span class=o>+</span><span class=mh>1</span><span class=p>)</span> <span class=k>begin</span>
        <span class=n>_M_id</span><span class=p>[</span><span class=n>initvar</span><span class=p>]</span> <span class=o>=</span> <span class=no>`RANDOM</span><span class=p>;</span>
        <span class=n>_M_other</span><span class=p>[</span><span class=n>initvar</span><span class=p>]</span> <span class=o>=</span> <span class=no>`RANDOM</span><span class=p>;</span>
      <span class=k>end</span>       <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>    <span class=no>`endif</span> <span class=c1>// RANDOMIZE_MEM_INIT
</span><span class=c1></span>  <span class=k>end</span> <span class=c1>// initial
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// SYNTHESIS
</span><span class=c1></span>
  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>_M_write_clk</span><span class=p>)</span> <span class=k>begin</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>_M_write_en</span> <span class=o>&amp;</span> <span class=n>_M_write_mask</span><span class=p>)</span> <span class=k>begin</span>
      <span class=n>_M_id</span><span class=p>[</span><span class=n>_M_write_addr</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>_M_write_data_id</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>      <span class=n>_M_other</span><span class=p>[</span><span class=n>_M_write_addr</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>_M_write_data_other</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:247:13
</span><span class=c1></span>    <span class=k>end</span>
  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>MemEmpty</span><span class=p>();</span>


  <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
  <span class=k>initial</span> <span class=k>begin</span>
    <span class=no>`INIT_RANDOM_PROLOG_</span>
    <span class=no>`ifdef</span> <span class=n>RANDOMIZE_MEM_INIT</span>
      <span class=k>integer</span> <span class=n>initvar</span><span class=p>;</span>
    <span class=no>`endif</span>
  <span class=k>end</span> <span class=c1>// initial
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// SYNTHESIS
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>MemOne</span><span class=p>();</span>
  <span class=kt>wire</span>       <span class=n>_M_read_addr</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_read_en</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_read_clk</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_read_data_id</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_read_data_other</span><span class=p>;</span>        <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_addr</span><span class=p>;</span>     <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_en</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_clk</span><span class=p>;</span>      <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_write_data_id</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_write_data_other</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_mask_id</span><span class=p>;</span>  <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>wire</span>       <span class=n>_M_write_mask_other</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=kt>reg</span>  <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_id</span><span class=p>[</span><span class=mh>0</span><span class=o>:</span><span class=mh>0</span><span class=p>];</span>
  <span class=kt>reg</span>  <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_M_other</span><span class=p>[</span><span class=mh>0</span><span class=o>:</span><span class=mh>0</span><span class=p>];</span>

  <span class=k>assign</span> <span class=n>_M_read_data_id</span> <span class=o>=</span> <span class=n>_M_id</span><span class=p>[</span><span class=n>_M_read_addr</span><span class=p>];</span> <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>_M_read_data_other</span> <span class=o>=</span> <span class=n>_M_other</span><span class=p>[</span><span class=n>_M_read_addr</span><span class=p>];</span>   <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>
  <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
  <span class=k>initial</span> <span class=k>begin</span>
    <span class=no>`INIT_RANDOM_PROLOG_</span>
    <span class=no>`ifdef</span> <span class=n>RANDOMIZE_MEM_INIT</span>
      <span class=n>_M_id</span><span class=p>[</span><span class=mh>0</span><span class=p>]</span> <span class=o>=</span> <span class=no>`RANDOM</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>      <span class=n>_M_other</span><span class=p>[</span><span class=mh>0</span><span class=p>]</span> <span class=o>=</span> <span class=no>`RANDOM</span><span class=p>;</span>    <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>    <span class=no>`endif</span> <span class=c1>// RANDOMIZE_MEM_INIT
</span><span class=c1></span>  <span class=k>end</span> <span class=c1>// initial
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// SYNTHESIS
</span><span class=c1></span>
  <span class=k>always</span> <span class=p>@(</span><span class=k>posedge</span> <span class=n>_M_write_clk</span><span class=p>)</span> <span class=k>begin</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>_M_write_en</span> <span class=o>&amp;</span> <span class=n>_M_write_mask</span><span class=p>)</span> <span class=k>begin</span>
      <span class=n>_M_id</span><span class=p>[</span><span class=n>_M_write_addr</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>_M_write_data_id</span><span class=p>;</span> <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>      <span class=n>_M_other</span><span class=p>[</span><span class=n>_M_write_addr</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>_M_write_data_other</span><span class=p>;</span>   <span class=c1>// &lt;stdin&gt;:253:13
</span><span class=c1></span>    <span class=k>end</span>
  <span class=k>end</span> <span class=c1>// always @(posedge)
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Attach</span><span class=p>(</span>
  <span class=k>input</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>);</span>


  <span class=no>`ifndef</span> <span class=n>SYNTHESIS</span>
    <span class=n>alias</span> <span class=n>a</span> <span class=o>=</span> <span class=n>b</span> <span class=o>=</span> <span class=n>c</span><span class=p>;</span>    <span class=c1>// &lt;stdin&gt;:256:7
</span><span class=c1></span>  <span class=no>`endif</span>
  <span class=no>`ifdef</span> <span class=n>SYNTHESIS</span>
    <span class=k>assign</span> <span class=n>a</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:256:7
</span><span class=c1></span>    <span class=k>assign</span> <span class=n>a</span> <span class=o>=</span> <span class=n>c</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:256:7
</span><span class=c1></span>    <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:256:7
</span><span class=c1></span>    <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=n>c</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:256:7
</span><span class=c1></span>    <span class=k>assign</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:256:7
</span><span class=c1></span>    <span class=k>assign</span> <span class=n>c</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:256:7
</span><span class=c1></span>  <span class=no>`endif</span> <span class=c1>// SYNTHESIS
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>IsInvalid</span><span class=p>(</span>
  <span class=k>output</span> <span class=n>a</span><span class=p>);</span>

<span class=k>endmodule</span>

<span class=k>module</span> <span class=n>Locations</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>a</span><span class=p>,</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>b</span><span class=p>);</span>

  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>a</span> <span class=o>+</span> <span class=mh>4&#39;h3</span> <span class=o>^</span> <span class=mh>4&#39;h1</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:262:12, :263:17, :264:12, :265:17, :266:12, :267:7
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>b</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>a</span> <span class=o>*</span> <span class=mh>4&#39;h2</span> <span class=o>^</span> <span class=mh>4&#39;h0</span><span class=p>;</span>       <span class=c1>// &lt;stdin&gt;:268:12, :269:17, :270:12, :271:17, :272:12, :273:7
</span><span class=c1></span><span class=k>endmodule</span>
</code></pre></td></tr></table></div></div><h3 id=rtl-dialectからverilogへ変換>RTL DialectからVerilogへ変換</h3><p>MLIRのDialectとして定義されたRTL DialectからVerilogへ変換する。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>circt-translate verilog-rtl-dialect.mlir --emit-verilog
</code></pre></td></tr></table></div></div><p>出力は以下。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-verilog data-lang=verilog><span class=c1>// Standard header to adapt well known macros to our needs.\n&#34;;
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>RANDOMIZE_GARBAGE_ASSIGN</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifdef</span> <span class=n>RANDOMIZE_INVALID_ASSIGN</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifdef</span> <span class=n>RANDOMIZE_REG_INIT</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifdef</span> <span class=n>RANDOMIZE_MEM_INIT</span>
<span class=cp>`define RANDOMIZE
</span><span class=cp></span><span class=no>`endif</span>
<span class=no>`ifndef</span> <span class=n>RANDOM</span>
<span class=cp>`define RANDOM $random
</span><span class=cp></span><span class=no>`endif</span>
<span class=c1>// Users can define &#39;PRINTF_COND&#39; to add an extra gate to prints.
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>PRINTF_COND</span>
<span class=cp>`define PRINTF_COND_ (`PRINTF_COND)
</span><span class=cp></span><span class=no>`else</span>
<span class=cp>`define PRINTF_COND_ 1
</span><span class=cp></span><span class=no>`endif</span>
<span class=c1>// Users can define &#39;STOP_COND&#39; to add an extra gate to stop conditions.
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>STOP_COND</span>
<span class=cp>`define STOP_COND_ (`STOP_COND)
</span><span class=cp></span><span class=no>`else</span>
<span class=cp>`define STOP_COND_ 1
</span><span class=cp></span><span class=no>`endif</span>

<span class=c1>// Users can define INIT_RANDOM as general code that gets injected into the
</span><span class=c1>// initializer block for modules with registers.
</span><span class=c1></span><span class=no>`ifndef</span> <span class=n>INIT_RANDOM</span>
<span class=cp>`define INIT_RANDOM
</span><span class=cp></span><span class=no>`endif</span>

<span class=c1>// If using random initialization, you can also define RANDOMIZE_DELAY to
</span><span class=c1>// customize the delay used, otherwise 0.002 is used.
</span><span class=c1></span><span class=no>`ifndef</span> <span class=n>RANDOMIZE_DELAY</span>
<span class=cp>`define RANDOMIZE_DELAY 0.002
</span><span class=cp></span><span class=no>`endif</span>

<span class=c1>// Define INIT_RANDOM_PROLOG_ for use in our modules below.
</span><span class=c1></span><span class=no>`ifdef</span> <span class=n>RANDOMIZE</span>
  <span class=no>`ifndef</span> <span class=n>VERILATOR</span>
<span class=cp>    `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
</span><span class=cp></span>  <span class=no>`else</span>
<span class=cp>    `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
</span><span class=cp></span>  <span class=no>`endif</span>
<span class=no>`else</span>
<span class=cp>  `define INIT_RANDOM_PROLOG_
</span><span class=cp></span><span class=no>`endif</span>
<span class=k>module</span> <span class=n>M1</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x</span><span class=p>,</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>y</span><span class=p>,</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>z</span><span class=p>);</span>

  <span class=k>assign</span> <span class=n>y</span> <span class=o>=</span> <span class=p>(</span><span class=n>z</span> <span class=o>+</span> <span class=mh>8&#39;h2A</span><span class=p>)</span> <span class=o>*</span> <span class=mh>8&#39;h5</span><span class=p>;</span>        <span class=c1>// verilog-rtl-dialect.mlir:7:12, :8:11, :9:10, :10:10, :11:10, :12:5
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_T</span> <span class=o>=</span> <span class=n>z</span> <span class=o>*</span> <span class=n>z</span> <span class=o>*</span> <span class=n>z</span><span class=p>;</span>    <span class=c1>// verilog-rtl-dialect.mlir:14:10
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>y</span> <span class=o>=</span> <span class=p>{</span><span class=n>_T</span> <span class=o>%</span> <span class=mh>8&#39;h5</span><span class=p>,</span> <span class=n>z</span><span class=p>,</span> <span class=n>_T</span><span class=p>};</span>        <span class=c1>// verilog-rtl-dialect.mlir:8:11, :15:10, :16:10, :17:10, :18:5
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>M2</span><span class=p>(</span>
  <span class=k>input</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>);</span>

  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>foo</span><span class=p>;</span>       <span class=c1>// verilog-rtl-dialect.mlir:38:11
</span><span class=c1></span>
  <span class=k>assign</span> <span class=n>x</span> <span class=o>=</span> <span class=mh>8&#39;h2A</span><span class=p>;</span>     <span class=c1>// verilog-rtl-dialect.mlir:35:12, :36:5
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>foo</span> <span class=o>=</span> <span class=n>y</span><span class=p>;</span>       <span class=c1>// verilog-rtl-dialect.mlir:39:5
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>z</span> <span class=o>=</span> <span class=n>foo</span><span class=p>;</span>       <span class=c1>// verilog-rtl-dialect.mlir:40:5
</span><span class=c1></span><span class=k>endmodule</span>

<span class=k>module</span> <span class=n>M3</span><span class=p>(</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span>  <span class=n>x</span><span class=p>,</span>
  <span class=k>output</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span>  <span class=n>y</span><span class=p>,</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span>  <span class=n>z</span><span class=p>,</span>
  <span class=k>input</span>  <span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>q</span><span class=p>);</span>

  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_T</span> <span class=o>=</span> <span class=n>z</span> <span class=o>+</span> <span class=mh>8&#39;h2A</span><span class=p>;</span>    <span class=c1>// verilog-rtl-dialect.mlir:56:12, :59:10
</span><span class=c1></span>  <span class=kt>wire</span> <span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span> <span class=n>_T_0</span> <span class=o>=</span> <span class=n>_T</span> <span class=o>&amp;</span> <span class=mh>8&#39;h2A</span> <span class=o>&amp;</span> <span class=mh>8&#39;h5</span><span class=p>;</span>  <span class=c1>// verilog-rtl-dialect.mlir:56:12, :57:11, :60:11
</span><span class=c1></span>  <span class=k>assign</span> <span class=n>y</span> <span class=o>=</span> <span class=n>_T_0</span> <span class=o>^</span> <span class=p>(</span><span class=n>_T</span> <span class=o>|</span> <span class=n>_T_0</span><span class=p>)</span> <span class=o>^</span> <span class=mh>8&#39;h2A</span> <span class=o>^</span> <span class=n>q</span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>8</span><span class=p>];</span>      <span class=c1>// verilog-rtl-dialect.mlir:56:12, :58:14, :61:11, :62:11, :63:10, :64:5
</span><span class=c1></span><span class=k>endmodule</span>
</code></pre></td></tr></table></div></div><h2 id=translateとoptのヘルプ><code>translate</code>と<code>opt</code>のヘルプ</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ circt-translate -h
OVERVIEW: CIRCT translation driver

USAGE: circt-translate <span class=o>[</span>options<span class=o>]</span> &lt;input file&gt;

OPTIONS:

Color Options:

  --color                                              - Use colors in output <span class=o>(</span><span class=nv>default</span><span class=o>=</span>autodetect<span class=o>)</span>

General options:

  --mlir-disable-threading                             - Disabling multi-threading within MLIR
  --mlir-elide-elementsattrs-if-larger<span class=o>=</span>&lt;uint&gt;          - Elide ElementsAttrs with <span class=s2>&#34;...&#34;</span> that have more elements than the given upper limit
  --mlir-pretty-debuginfo                              - Print pretty debug info in MLIR output
  --mlir-print-debuginfo                               - Print debug info in MLIR output
  --mlir-print-elementsattrs-with-hex-if-larger<span class=o>=</span>&lt;long&gt; - Print DenseElementsAttrs with a hex string that have more elements than the given upper limit <span class=o>(</span>use -1 to disable<span class=o>)</span>
  --mlir-print-op-on-diagnostic                        - When a diagnostic is emitted on an operation, also print the operation as an attached note
  --mlir-print-stacktrace-on-diagnostic                - When a diagnostic is emitted, also print the stack trace as an attached note
  -o<span class=o>=</span>&lt;filename&gt;                                        - Output filename
  Translation to perform
      --emit-verilog                                      - emit-verilog
      --llhd-to-verilog                                   - llhd-to-verilog
      --parse-fir                                         - parse-fir
  --split-input-file                                   - Split the input file into pieces and process each chunk independently
  --verify-diagnostics                                 - Check that emitted diagnostics match expected-* lines on the corresponding line

Generic Options:

  --help                                               - Display available options <span class=o>(</span>--help-hidden <span class=k>for</span> more<span class=o>)</span>
  --help-list                                          - Display list of available options <span class=o>(</span>--help-list-hidden <span class=k>for</span> more<span class=o>)</span>
  --version                                            - Display the version of this program
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ circt-opt -h
OVERVIEW: circt modular optimizer driver

USAGE: circt-opt <span class=o>[</span>options<span class=o>]</span> &lt;input file&gt;

OPTIONS:

Color Options:

  --color                                              - Use colors in output <span class=o>(</span><span class=nv>default</span><span class=o>=</span>autodetect<span class=o>)</span>

General options:

  --allow-unregistered-dialect                         - Allow operation with no registered dialects
  --enable-name-compression                            - Enable name/filename string compression
  --mlir-disable-threading                             - Disabling multi-threading within MLIR
  --mlir-elide-elementsattrs-if-larger<span class=o>=</span>&lt;uint&gt;          - Elide ElementsAttrs with <span class=s2>&#34;...&#34;</span> that have more elements than the given upper limit
  --mlir-pretty-debuginfo                              - Print pretty debug info in MLIR output
  --mlir-print-debuginfo                               - Print debug info in MLIR output
  --mlir-print-elementsattrs-with-hex-if-larger<span class=o>=</span>&lt;long&gt; - Print DenseElementsAttrs with a hex string that have more elements than the given upper limit <span class=o>(</span>use -1 to disable<span class=o>)</span>
  --mlir-print-op-on-diagnostic                        - When a diagnostic is emitted on an operation, also print the operation as an attached note
  --mlir-print-stacktrace-on-diagnostic                - When a diagnostic is emitted, also print the stack trace as an attached note
  -o<span class=o>=</span>&lt;filename&gt;                                        - Output filename
  --pass-pipeline-crash-reproducer<span class=o>=</span>&lt;string&gt;            - Generate a .mlir reproducer file at the given output path <span class=k>if</span> the pass manager crashes or fails
  --pass-pipeline-local-reproducer                     - When generating a crash reproducer, attempt to generated a reproducer with the smallest pipeline.
  --pass-statistics                                    - Display the statistics of each pass
  --pass-statistics-display<span class=o>=</span>&lt;value&gt;                    - Display method <span class=k>for</span> pass <span class=nv>statistics</span>
    <span class=o>=</span>list                                              -   display the results in a merged list sorted by pass <span class=nv>name</span>
    <span class=o>=</span>pipeline                                          -   display the results with a nested pipeline view
  --pass-timing                                        - Display the execution <span class=nb>times</span> of each pass
  --pass-timing-display<span class=o>=</span>&lt;value&gt;                        - Display method <span class=k>for</span> pass timing <span class=nv>data</span>
    <span class=o>=</span>list                                              -   display the results in a list sorted by total <span class=nb>time</span>
    <span class=o>=</span>pipeline                                          -   display the results with a nested pipeline view
  --print-ir-after                                     - Print IR after specified passes
    --pass-pipeline                                    -   A textual description of a pass pipeline to run
    Passes:
      --analyze-dataflow                               -   Print resource <span class=o>(</span>operation<span class=o>)</span> statistics
      --canonicalize                                   -   Canonicalize operations
      --canonicalize-dataflow                          -   Canonicalize handshake IR
      --convert-llhd-to-llvm                           -   Convert LLHD to LLVM
      --create-dataflow                                -   Convert standard MLIR into dataflow IR
      --create-pipeline                                -   Create StaticLogic pipeline operations.
      --cse                                            -   Eliminate common sub-expressions
      --handshake-insert-buffer                        -   Insert buffers to <span class=nb>break</span> graph cycles.
      --inline                                         -   Inline <span class=k>function</span> calls
        --disable-simplify                             - Disable running simplifications during inlining
        ---iterations<span class=o>=</span>&lt;uint&gt;                        - Maximum number of iterations when inlining within an SCC
      --llhmaxd-early-code-motion                         -   Move side-effect-free instructions and llhd.prb up in the CFG
      --llhd-function-elimination                      -   Deletes all functions.
      --llhd-process-lowering                          -   Lowers LLHD Processes to Entities.
      --lower-firrtl-to-rtl                            -   Lower FIRRTL to RTL
      --lower-handshake-to-firrtl                      -   Lowering to FIRRTL Dialect
      --remove-block-structure                         -   Remove block structure in handshake IR
  --print-ir-after-all                                 - Print IR after each pass
  --print-ir-after-change                              - When printing the IR after a pass, only print <span class=k>if</span> the IR changed
  --print-ir-before                                    - Print IR before specified passes
    --pass-pipeline                                    -   A textual description of a pass pipeline to run
    Passes:
      --analyze-dataflow                               -   Print resource <span class=o>(</span>operation<span class=o>)</span> statistics
      --canonicalize                                   -   Canonicalize operations
      --canonicalize-dataflow                          -   Canonicalize handshake IR
      --convert-llhd-to-llvm                           -   Convert LLHD to LLVM
      --create-dataflow                                -   Convert standard MLIR into dataflow IR
      --create-pipeline                                -   Create StaticLogic pipeline operations.
      --cse                                            -   Eliminate common sub-expressions
      --handshake-insert-buffer                        -   Insert buffers to <span class=nb>break</span> graph cycles.
      --inline                                         -   Inline <span class=k>function</span> calls
        --disable-simplify                             - Disable running simplifications during inlining
        --max-iterations<span class=o>=</span>&lt;uint&gt;                        - Maximum number of iterations when inlining within an SCC
      --llhd-early-code-motion                         -   Move side-effect-free instructions and llhd.prb up in the CFG
      --llhd-function-elimination                      -   Deletes all functions.
      --llhd-process-lowering                          -   Lowers LLHD Processes to Entities.
      --lower-firrtl-to-rtl                            -   Lower FIRRTL to RTL
      --lower-handshake-to-firrtl                      -   Lowering to FIRRTL Dialect
      --remove-block-structure                         -   Remove block structure in handshake IR
  --print-ir-before-all                                - Print IR before each pass
  --print-ir-module-scope                              - When printing IR <span class=k>for</span> print-ir-<span class=o>[</span>before<span class=p>|</span>after<span class=o>]{</span>-all<span class=o>}</span> always print the top-level module operation
  Compiler passes to run
    --pass-pipeline                                    -   A textual description of a pass pipeline to run
    Passes:
      --analyze-dataflow                               -   Print resource <span class=o>(</span>operation<span class=o>)</span> statistics
      --canonicalize                                   -   Canonicalize operations
      --canonicalize-dataflow                          -   Canonicalize handshake IR
      --convert-llhd-to-llvm                           -   Convert LLHD to LLVM
      --create-dataflow                                -   Convert standard MLIR into dataflow IR
      --create-pipeline                                -   Create StaticLogic pipeline operations.
      --cse                                            -   Eliminate common sub-expressions
      --handshake-insert-buffer                        -   Insert buffers to <span class=nb>break</span> graph cycles.
      --inline                                         -   Inline <span class=k>function</span> calls
        --disable-simplify                             - Disable running simplifications during inlining
        --max-iterations<span class=o>=</span>&lt;uint&gt;                        - Maximum number of iterations when inlining within an SCC
      --llhd-early-code-motion                         -   Move side-effect-free instructions and llhd.prb up in the CFG
      --llhd-function-elimination                      -   Deletes all functions.
      --llhd-process-lowering                          -   Lowers LLHD Processes to Entities.
      --lower-firrtl-to-rtl                            -   Lower FIRRTL to RTL
      --lower-handshake-to-firrtl                      -   Lowering to FIRRTL Dialect
      --remove-block-structure                         -   Remove block structure in handshake IR
  --show-dialects                                      - Print the list of registered dialects
  --split-input-file                                   - Split the input file into pieces and process each chunk independently
  --verify-diagnostics                                 - Check that emitted diagnostics match expected-* lines on the corresponding line
  --verify-each                                        - Run the verifier after each transformation pass

Generic Options:

  --help                                               - Display available options <span class=o>(</span>--help-hidden <span class=k>for</span> more<span class=o>)</span>
  --help-list                                          - Display list of available options <span class=o>(</span>--help-list-hidden <span class=k>for</span> more<span class=o>)</span>
  --version                                            - Display the version of this program
</code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-08-07</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/build-circuit-ir-compiler/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/circt/>CIRCT</a>,&nbsp;<a href=/tags/mlir/>MLIR</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/run-onnx-mlir-shared-library/ class=prev rel=prev title="ONNX MLIRで出力したshared libraryを実行する"><i class="fas fa-angle-left fa-fw"></i>ONNX MLIRで出力したshared libraryを実行する</a>
<a href=/posts/onnx-mlir-dialect/ class=next rel=next title="ONNX MLIRのDialect調査">ONNX MLIRのDialect調査<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.74.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Masahiro Hiramori</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/custom-font.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>